#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Executando verificaÃ§Ãµes antes do push..."

# Executar testes completos antes do push
echo "ğŸ§ª Executando testes completos..."
npm run test:ci

# Verificar qualidade do cÃ³digo
echo "ğŸ” Verificando qualidade do cÃ³digo..."
npm run quality:check

# Verificar build de produÃ§Ã£o
echo "ğŸ—ï¸ Verificando build de produÃ§Ã£o..."
npm run build

# Verificar vulnerabilidades crÃ­ticas
echo "ğŸ”’ Verificando vulnerabilidades crÃ­ticas..."
npm audit --audit-level=high || {
  echo "âš ï¸ Vulnerabilidades crÃ­ticas encontradas. Execute 'npm audit fix' para corrigir."
  exit 1
}

echo "âœ… Pre-push checks passed!" 